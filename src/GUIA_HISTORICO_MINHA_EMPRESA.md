# üìñ Guia do Hist√≥rico de Altera√ß√µes - Minha Empresa

**Vers√£o:** 1.0  
**√öltima Atualiza√ß√£o:** 07/11/2024

---

## üéØ Vis√£o Geral

O **Hist√≥rico de Altera√ß√µes** √© um recurso que registra automaticamente todas as modifica√ß√µes realizadas nas configura√ß√µes da empresa, permitindo rastreabilidade completa e auditoria de mudan√ßas.

---

## üöÄ Como Usar

### Acessando o Hist√≥rico

1. Navegue at√© **Minha Empresa** no menu lateral
2. Clique no bot√£o **"Hist√≥rico"** no canto superior direito
3. Um modal ser√° aberto com todas as altera√ß√µes registradas

### Interface do Hist√≥rico

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìú Hist√≥rico de Altera√ß√µes                            [X]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  üìÖ 07/11/2024  ‚è∞ 14:30:45          [3 campos]     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  üë§ Alterado por: Administrador                      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  üìù Raz√£o Social                                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ Valor Anterior: [Empresa ABC Ltda]              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ Novo Valor: [Empresa XYZ Ltda]                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  üìù CNPJ                                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ Valor Anterior: [00.000.000/0001-00]            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ Novo Valor: [11.111.111/0001-11]                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  üñºÔ∏è Logo da Empresa                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ Valor Anterior: (Sem logo)                      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ Novo Valor: (Logo carregada)                    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  [Mais entradas antigas...]                                 ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ                                        [Fechar]              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä Informa√ß√µes Registradas

Cada entrada no hist√≥rico cont√©m:

### 1. Metadados da Altera√ß√£o
- **üìÖ Data**: Quando a altera√ß√£o foi feita
- **‚è∞ Hora**: Hor√°rio exato da modifica√ß√£o
- **üë§ Usu√°rio**: Quem realizou a altera√ß√£o
- **üî¢ Quantidade**: N√∫mero de campos modificados

### 2. Detalhes das Mudan√ßas
Para cada campo alterado:
- **Nome do Campo**: Label amig√°vel (ex: "Raz√£o Social")
- **Valor Anterior**: Estado antes da altera√ß√£o (em vermelho)
- **Novo Valor**: Estado ap√≥s a altera√ß√£o (em verde)

---

## üîç Campos Rastreados

### Dados Gerais (9 campos)
- ‚úÖ CNPJ
- ‚úÖ Raz√£o Social
- ‚úÖ Nome Fantasia
- ‚úÖ Setor/Atividade
- ‚úÖ Descri√ß√£o
- ‚úÖ E-mail
- ‚úÖ Telefone
- ‚úÖ Website
- ‚úÖ Logo da Empresa

### Endere√ßo (7 campos)
- ‚úÖ Rua
- ‚úÖ N√∫mero
- ‚úÖ Complemento
- ‚úÖ Bairro
- ‚úÖ Cidade
- ‚úÖ Estado
- ‚úÖ CEP

### Dados Fiscais (2 campos)
- ‚úÖ Inscri√ß√£o Estadual
- ‚úÖ Inscri√ß√£o Municipal

### Configura√ß√µes Tribut√°rias (9 campos)
- ‚úÖ Regime Tribut√°rio
- ‚úÖ CSOSN Padr√£o
- ‚úÖ CST Padr√£o
- ‚úÖ Al√≠quota ICMS Padr√£o
- ‚úÖ CFOP Venda Dentro do Estado
- ‚úÖ CFOP Venda Fora do Estado
- ‚úÖ CFOP Compras
- ‚úÖ CFOP Devolu√ß√µes
- ‚úÖ CFOP Servi√ßos

### PIS/COFINS (3 campos)
- ‚úÖ Regime PIS/COFINS
- ‚úÖ Al√≠quota PIS Padr√£o
- ‚úÖ Al√≠quota COFINS Padr√£o

**Total: 32 campos rastreados**

---

## üé® C√≥digo de Cores

O hist√≥rico usa cores para facilitar a compreens√£o:

| Cor | Significado | Uso |
|-----|-------------|-----|
| üî¥ Vermelho | Valor Anterior | Fundo vermelho claro |
| üü¢ Verde | Novo Valor | Fundo verde claro |
| üîµ Azul | Data/Hora | Badges azuis |
| üü£ Roxo | Contador de Campos | Badge roxo |
| ‚ö™ Cinza | Campos Vazios | "(Vazio)" em cinza |

---

## üìù Exemplos de Uso

### Exemplo 1: Altera√ß√£o Simples
```
Voc√™ mudou apenas o telefone da empresa:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìÖ 07/11/2024  ‚è∞ 10:15:30  [1 campo] ‚îÇ
‚îÇ üë§ Alterado por: Administrador          ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ üìû Telefone                            ‚îÇ
‚îÇ ‚îú‚îÄ Anterior: (11) 1234-5678           ‚îÇ
‚îÇ ‚îî‚îÄ Novo: (11) 9876-5432               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Exemplo 2: M√∫ltiplas Altera√ß√µes
```
Voc√™ atualizou dados completos via busca de CNPJ:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìÖ 07/11/2024  ‚è∞ 14:20:00  [8 campos] ‚îÇ
‚îÇ üë§ Alterado por: Administrador          ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ üìù Raz√£o Social                        ‚îÇ
‚îÇ ‚îú‚îÄ Anterior: (Vazio)                  ‚îÇ
‚îÇ ‚îî‚îÄ Novo: EMPRESA EXEMPLO LTDA         ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ üìç Rua                                 ‚îÇ
‚îÇ ‚îú‚îÄ Anterior: (Vazio)                  ‚îÇ
‚îÇ ‚îî‚îÄ Novo: Av. Paulista                 ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ [... mais 6 campos ...]                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Exemplo 3: Upload de Logo
```
Voc√™ carregou a logo da empresa:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìÖ 07/11/2024  ‚è∞ 16:45:12  [1 campo] ‚îÇ
‚îÇ üë§ Alterado por: Administrador          ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ üñºÔ∏è Logo da Empresa                     ‚îÇ
‚îÇ ‚îú‚îÄ Anterior: (Sem logo)               ‚îÇ
‚îÇ ‚îî‚îÄ Novo: (Logo carregada)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚öôÔ∏è Comportamento T√©cnico

### Quando o Registro Acontece

O hist√≥rico √© registrado **APENAS** quando voc√™ clica em **"Salvar"**.

```
‚ùå N√ÉO registra:
- Digitar nos campos (modo edi√ß√£o)
- Clicar em "Cancelar"
- Fechar a p√°gina sem salvar

‚úÖ Registra:
- Clicar em "Salvar" com altera√ß√µes
- Cada salvamento = 1 entrada no hist√≥rico
```

### Detec√ß√£o de Mudan√ßas

O sistema compara automaticamente:
```javascript
if (valorAntigo !== valorNovo) {
  // Registra a mudan√ßa
}
```

### Persist√™ncia

- ‚úÖ Salvo em **localStorage**
- ‚úÖ Sobrevive a recarregamento da p√°gina
- ‚úÖ Sobrevive a fechar o navegador
- ‚úÖ Ordem cronol√≥gica (mais recente primeiro)

---

## üîí Privacidade e Seguran√ßa

### Dados Sens√≠veis

Campos sens√≠veis s√£o tratados especialmente:

| Campo | Como Aparece no Hist√≥rico |
|-------|---------------------------|
| Logo | "(Logo carregada)" ou "(Sem logo)" |
| CNPJ | Valor completo vis√≠vel |
| E-mail | Valor completo vis√≠vel |
| Telefone | Valor completo vis√≠vel |

### Usu√°rio Atual

Por enquanto, todas as altera√ß√µes s√£o atribu√≠das a:
- **Nome:** Administrador
- **ID:** USER-001

> üí° **Futuro:** Integra√ß√£o com sistema de autentica√ß√£o mostrar√° o usu√°rio real logado.

---

## üéØ Casos de Uso Pr√°ticos

### 1. Auditoria Interna
"Quando alteramos o CNPJ da empresa?"
- Abra o hist√≥rico
- Procure por "CNPJ"
- Veja data e valores

### 2. Rastreamento de Erros
"Por que a logo sumiu?"
- Abra o hist√≥rico
- Encontre √∫ltima altera√ß√£o de "Logo da Empresa"
- Veja se foi removida e por quem

### 3. Conformidade
"Precisamos provar que atualizamos os dados fiscais"
- Hist√≥rico mostra todas as altera√ß√µes tribut√°rias
- Com data, hora e campos alterados

### 4. Recupera√ß√£o de Dados
"Qual era o endere√ßo antigo da empresa?"
- Hist√≥rico mostra valores anteriores
- Voc√™ pode copiar e restaurar manualmente

---

## üêõ Troubleshooting

### Hist√≥rico est√° vazio

**Problema:** Abri o hist√≥rico e est√° vazio

**Solu√ß√£o:**
1. O hist√≥rico s√≥ registra ap√≥s voc√™ salvar altera√ß√µes
2. Se √© primeira vez usando, fa√ßa uma altera√ß√£o e salve
3. A entrada aparecer√° imediatamente

### N√£o vejo altera√ß√µes recentes

**Problema:** Salvei mas n√£o aparece no hist√≥rico

**Poss√≠veis causas:**
1. N√£o havia diferen√ßa entre valores antigos e novos
2. Apenas clicou em "Editar" e "Salvar" sem mudar nada

**Solu√ß√£o:**
- Fa√ßa uma altera√ß√£o real em algum campo
- Clique em "Salvar"
- Verifique novamente

### Logo aparece como "(Logo carregada)"

**Problema:** Queria ver a imagem no hist√≥rico

**Explica√ß√£o:**
- Por quest√µes de performance e UX
- Logos n√£o s√£o exibidas no hist√≥rico
- Apenas indica√ß√£o se tem ou n√£o

---

## üì± Interface Responsiva

O hist√≥rico se adapta ao tamanho da tela:

### Desktop (> 1024px)
- Modal largo (max-width: 4xl)
- Compara√ß√£o lado a lado
- Visualiza√ß√£o completa

### Tablet (768px - 1024px)
- Modal m√©dio
- Campos empilhados
- Scroll vertical

### Mobile (< 768px)
- Modal full-screen
- Cards compactos
- Otimizado para toque

---

## üîÆ Recursos Futuros

Melhorias planejadas:

1. **Filtros**
   - Por data
   - Por campo
   - Por usu√°rio

2. **Busca**
   - Pesquisar por valor
   - Encontrar altera√ß√µes espec√≠ficas

3. **Exporta√ß√£o**
   - PDF do hist√≥rico
   - Excel para auditoria

4. **Restaura√ß√£o**
   - Desfazer altera√ß√£o
   - Voltar para valor anterior

5. **Notifica√ß√µes**
   - Alertar sobre mudan√ßas cr√≠ticas
   - E-mail de resumo semanal

---

## üìû Suporte

Problemas com o hist√≥rico?

1. Verifique o console do navegador (F12)
2. Logs come√ßam com "=== HIST√ìRICO ==="
3. Reporte com data/hora e a√ß√£o realizada

---

## ‚úÖ Checklist de Verifica√ß√£o

Use antes de reportar problemas:

- [ ] Estou em "Minha Empresa"?
- [ ] Cliquei em "Editar"?
- [ ] Fiz altera√ß√µes reais nos campos?
- [ ] Cliquei em "Salvar" (n√£o "Cancelar")?
- [ ] Abri o modal de "Hist√≥rico"?
- [ ] Verifiquei se a entrada est√° no topo?
- [ ] Recarreguei a p√°gina para testar persist√™ncia?

---

**Hist√≥rico de Altera√ß√µes - Totalmente Funcional** ‚úÖ  
**Auditoria Completa - Rastreabilidade Garantida** üîç
